<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#FF0000">
    <meta name="description" content="Download YouTube videos easily on your iPhone">
    <title>YouTube Downloader</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="header-left">
                <div class="logo">
                    <svg class="youtube-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                    </svg>
                </div>
                <div class="header-text">
                    <h1 class="app-title">YT Downloader</h1>
                    <p class="app-subtitle">Save videos to your device</p>
                </div>
            </div>
            <button class="info-btn" id="infoBtn" data-testid="button-info">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 16v-4M12 8h.01"/>
                </svg>
            </button>
        </header>

        <main class="main">
            <form class="url-form" id="urlForm">
                <div class="input-wrapper">
                    <input 
                        type="url" 
                        id="urlInput" 
                        class="url-input" 
                        placeholder="Paste YouTube URL here"
                        autocomplete="off"
                        data-testid="input-url"
                    >
                    <button type="button" class="clear-btn hidden" id="clearBtn" data-testid="button-clear">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
                <button type="submit" class="download-btn" id="downloadBtn" disabled data-testid="button-download">
                    <svg class="download-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    <span class="btn-text">Get Video</span>
                    <div class="spinner hidden"></div>
                </button>
            </form>

            <div class="progress-section hidden" id="progressSection">
                <div class="progress-header">
                    <span class="progress-label">Downloading...</span>
                    <span class="progress-percent" id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <div class="status-card error hidden" id="errorCard">
                <svg class="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="12"/>
                    <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                <p class="status-text" id="errorText" data-testid="text-error"></p>
            </div>

            <div class="status-card success hidden" id="successCard">
                <svg class="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
                <p class="status-text" data-testid="text-success">Video downloaded successfully!</p>
            </div>

            <div class="video-card hidden" id="videoCard">
                <div class="thumbnail-wrapper">
                    <img src="" alt="Video thumbnail" class="thumbnail" id="thumbnail" data-testid="img-thumbnail">
                    <div class="play-overlay">
                        <div class="play-button">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <polygon points="5 3 19 12 5 21 5 3"/>
                            </svg>
                        </div>
                    </div>
                    <span class="duration" id="duration" data-testid="text-duration"></span>
                </div>
                <div class="video-info">
                    <h3 class="video-title" id="videoTitle" data-testid="text-video-title"></h3>
                    <div class="video-meta">
                        <p class="channel-name" id="channelName" data-testid="text-channel"></p>
                        <span class="playlist-badge hidden" id="playlistBadge" data-testid="badge-playlist">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="8" y1="6" x2="21" y2="6"/>
                                <line x1="8" y1="12" x2="21" y2="12"/>
                                <line x1="8" y1="18" x2="21" y2="18"/>
                                <line x1="3" y1="6" x2="3.01" y2="6"/>
                                <line x1="3" y1="12" x2="3.01" y2="12"/>
                                <line x1="3" y1="18" x2="3.01" y2="18"/>
                            </svg>
                            From Playlist
                        </span>
                    </div>
                </div>
                <div class="download-options">
                    <div class="option-group">
                        <label class="option-label">Quality</label>
                        <select id="qualitySelect" class="quality-select" data-testid="select-quality">
                            <option value="">Best Available</option>
                        </select>
                    </div>
                    <div class="option-group">
                        <label class="option-label">Format</label>
                        <div class="format-toggle" id="formatToggle">
                            <button type="button" class="format-btn active" data-format="video" data-testid="button-format-video">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"/>
                                    <line x1="7" y1="2" x2="7" y2="22"/>
                                    <line x1="17" y1="2" x2="17" y2="22"/>
                                    <line x1="2" y1="12" x2="22" y2="12"/>
                                    <line x1="2" y1="7" x2="7" y2="7"/>
                                    <line x1="2" y1="17" x2="7" y2="17"/>
                                    <line x1="17" y1="7" x2="22" y2="7"/>
                                    <line x1="17" y1="17" x2="22" y2="17"/>
                                </svg>
                                <span>Video</span>
                            </button>
                            <button type="button" class="format-btn" data-format="audio" data-testid="button-format-audio">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18V5l12-2v13"/>
                                    <circle cx="6" cy="18" r="3"/>
                                    <circle cx="18" cy="16" r="3"/>
                                </svg>
                                <span>Audio</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="empty-state" id="emptyState">
                <div class="empty-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                    </svg>
                </div>
                <h2 class="empty-title">Download YouTube Videos</h2>
                <p class="empty-text">Paste a YouTube video link above to get started. We'll fetch the video info and let you download it.</p>
                <div class="url-examples">
                    <span class="url-tag">youtube.com/watch?v=...</span>
                    <span class="url-tag">youtu.be/...</span>
                    <span class="url-tag">shorts/...</span>
                </div>
            </div>

            <section class="history-section hidden" id="historySection">
                <div class="history-header">
                    <h2 class="history-title">Download History</h2>
                    <button type="button" class="clear-history-btn" id="clearHistoryBtn" data-testid="button-clear-history">
                        Clear All
                    </button>
                </div>
                <div class="history-list" id="historyList" data-testid="list-history">
                </div>
            </section>
        </main>

        <footer class="footer">
            <p class="footer-text">For personal use only. Respect copyright laws.</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
